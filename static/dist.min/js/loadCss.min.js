var util={ajax:function(t){if(t.type=t.type||"get",t.async=t.async||!0,t.data=t.data||null,window.XMLHttpRequest)var e=new XMLHttpRequest;else e=new ActiveXObject("Microsoft.XMLHTTP");if("post"==t.type){e.open(t.type,t.url,t.async),!t.contentType&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var n=t.data instanceof FormData?t.data:util.toData(t.data);e.send(n)}else{var o=t.url+"?"+util.toData(t.data);e.open(t.type,o,t.async),e.send()}e.onreadystatechange=function(){4==e.readyState&&(e.status>=200&&e.status<300||304==e.status?t.success&&t.success(e.responseText):t.error&&t.error(e.status))}},toData:function(t){if(null==t)return t;var e=[];for(var n in t){var o=n+"="+t[n];e.push(o)}return e.join("&")},isPc:function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,o=0;o<e.length;o++)if(t.indexOf(e[o])>0){n=!1;break}return n},countDown:function(t,e,n){var o=null;return{startWorker:function(){"undefined"!=typeof Worker?(null===o&&(o=new Worker(t)),o.onmessage=function(t){e(t)}):time.innerHTML="Sorry, your browserdoes not support Web Workers..."},stopWorker:function(){o.terminate(),n&&n()},getWorker:function(){return o}}},randomColor:function(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"},dataURLtoBlob:function(t){for(var e=t.split(","),n=e[0].match(/:(.*?);/)[1],o=atob(e[1]),a=o.length,r=new Uint8Array(a);a--;)r[a]=o.charCodeAt(a);return new Blob([r],{type:n})},rsaTranform:function(t,e){var n=new e;return n.setPublicKey("-----BEGIN PUBLIC KEY-----MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAMzli1vbwDGBmk5vPIPN3lLZBhgZY/dCGzY0de/bkBQGtwmB4fcuBav4bjbEPL5mBtfPOro50PYU+w4eEMX8U+sCAwEAAQ==-----END PUBLIC KEY-----"),n.encrypt(t).toString()},URLencode:function(t){return decodeURI(t).replace(/\+/g,"%2B").replace(/\"/g,"%22").replace(/\'/g,"%27").replace(/\//g,"%2F")},myBrowser:function(){var t=navigator.userAgent,e=t.indexOf("Opera")>-1;return e?"Opera":t.indexOf("Firefox")>-1?"FF":t.indexOf("Chrome")>-1?"Chrome":t.indexOf("Safari")>-1?"Safari":t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1&&!e?"IE":t.indexOf("Trident")>-1?"Edge":void 0}},canvasUtil={drawPts:function(t,e,n){if(n instanceof Path||n.pts){var o=n.color,a=n.lw;n=n.pts}var r=n[0];e.save(),e.beginPath(),e.moveTo(r.x,r.y),n.slice(1).forEach(function(t){e.lineTo(t.x,t.y)}),e.lineWidth=a||t.lw,e.strokeStyle=o||t.color,e.stroke(),e.restore()},init:function(t){t.paths=[],t.pts=[],t.color="black",t.lw=1},setLw:function(t,e){t.lw=e},setColor:function(t,e){t.color=e},addPath:function(t,e){t.paths.push(new Path(e,t.lw,t.color))},addPos:function(t,e,n){t.pts.push(new Pos(e,n))},clearPos:function(t){t.pts=[]},clearPaint:function(t,e){t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillRect(0,0,e.width,e.height)},canvasToPng:function(t,e,n){var o=t.toDataURL("image/png");e&&e.push(o),n(o)}},dom={createByHTML:function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},queryAll:function(t,e){return e?e.querySelectorAll(t):document.querySelectorAll(t)},query:function(t,e){return e?e.querySelector(t):document.querySelector(t)},show:function(t){t.classList.remove("hide"),t.classList.add("show")},hide:function(t){t.classList.remove("show"),t.classList.add("hide")},append:function(t,e){"string"==typeof e&&(e=document.createTextNode(e)),t.appendChild(e)},prepend:function(t,e){"string"==typeof e&&(e=document.createTextNode(e)),t.insertBefore(e,t.firstElementChild)},before:function(t,e){"string"==typeof e&&(e=document.createTextNode(e)),t.parentNode.insertBefore(e,t)},after:function(t,e){"string"==typeof e&&(e=document.createTextNode(e)),t.parentNode.insertBefore(e,t.nextElementSibling)},matches:function(t,e){return"matches"in t?t.matches(e):"webkitMatchesSelector"in t&&t.webkitMatchesSelector(e)},closest:function(t,e){for(var n=t;n;){if(dom.matches(n,e))return n;n=n.parentElement}return null}},cache={add:function(t,e){localStorage.setItem(t,JSON.stringify(e))},get:function(t){return JSON.parse(localStorage.getItem(t))},remove:function(t){localStorage.removeItem(t)},clear:function(){localStorage.clear()}},socketStatus={myLoading:null,init:function(t){t.on("error",function(t){socketStatus.myLoading?(socketStatus.myLoading.show(),socketStatus.myLoading.setText("socket错误"+t)):socketStatus.myLoading=new loading({text:"socket错误"+t})}),t.on("disconnect",function(t){socketStatus.myLoading?socketStatus.myLoading.setText("与服务器断开了连接"):socketStatus.myLoading=new loading({text:"与服务器断开了连接"})}),t.on("reconnect_attempt",function(t){socketStatus.myLoading?socketStatus.myLoading.setText("尝试第"+t+"次重连"):socketStatus.myLoading=new loading({text:"尝试第"+t+"次重连"})}),t.on("reconnecting",function(t){socketStatus.myLoading?socketStatus.myLoading.setText("正在重连..."):socketStatus.myLoading=new loading({text:"正在重连..."})}),t.on("reconnect",function(t){socketStatus.myLoading?socketStatus.myLoading.setText("重连成功"):socketStatus.myLoading=new loading({text:"重连成功"})}),t.on("connect_error",function(t){socketStatus.myLoading?socketStatus.myLoading.setText("连接错误"):socketStatus.myLoading=new loading({text:"连接错误"})}),t.on("reconnect_error",function(t){socketStatus.myLoading?socketStatus.myLoading.setText("重连错误"):socketStatus.myLoading=new loading({text:"重连错误"})}),t.on("connect_timeout",function(t){socketStatus.myLoading?socketStatus.myLoading.setText("连接超时"):socketStatus.myLoading=new loading({text:"连接超时"})}),t.on("reconnect_failed",function(t){socketStatus.myLoading?socketStatus.myLoading.setText("重连失败,请重新登陆"):socketStatus.myLoading=new loading({text:"重连失败,请重新登陆"})})}};function cssInit(){var t=document.getElementsByTagName("head")[0],e=function(e){var n=document.createElement("link");n.href=e,n.setAttribute("rel","stylesheet"),n.setAttribute("media","all"),n.setAttribute("type","text/css"),t.appendChild(n)};util.isPc()?e("./dist.min/css/paint.pc.min.css"):e("./dist.min/css/paint.mb.min.css")}cssInit();